From a62dfda7aee537570675a2eae1760d20118fb171 Mon Sep 17 00:00:00 2001
From: Daz Jones <yuki@thebronasium.com>
Date: Sun, 9 Dec 2012 00:47:18 +0000
Subject: [PATCH] libhardware_legacy: add support for custom Wi-Fi
 implementations

Change-Id: Ic15cd9db8f26974e2ef413171e2656d661c730e9
---
 wifi/Android.mk |   20 +++++++++++++++++++-
 1 files changed, 19 insertions(+), 1 deletions(-)

diff --git a/wifi/Android.mk b/wifi/Android.mk
index 3b89a17..7e4ed80 100644
--- a/wifi/Android.mk
+++ b/wifi/Android.mk
@@ -12,9 +12,21 @@ endif
 ifdef WIFI_DRIVER_MODULE_NAME
 LOCAL_CFLAGS += -DWIFI_DRIVER_MODULE_NAME=\"$(WIFI_DRIVER_MODULE_NAME)\"
 endif
+ifdef WIFI_AP_DRIVER_MODULE_PATH
+LOCAL_CFLAGS += -DWIFI_AP_DRIVER_MODULE_PATH=\"$(WIFI_AP_DRIVER_MODULE_PATH)\"
+endif
+ifdef WIFI_AP_DRIVER_MODULE_ARG
+LOCAL_CFLAGS += -DWIFI_AP_DRIVER_MODULE_ARG=\"$(WIFI_AP_DRIVER_MODULE_ARG)\"
+endif
+ifdef WIFI_AP_DRIVER_MODULE_NAME
+LOCAL_CFLAGS += -DWIFI_AP_DRIVER_MODULE_NAME=\"$(WIFI_AP_DRIVER_MODULE_NAME)\"
+endif
 ifdef WIFI_FIRMWARE_LOADER
 LOCAL_CFLAGS += -DWIFI_FIRMWARE_LOADER=\"$(WIFI_FIRMWARE_LOADER)\"
 endif
+ifdef WIFI_AP_FIRMWARE_LOADER
+LOCAL_CFLAGS += -DWIFI_AP_FIRMWARE_LOADER=\"$(WIFI_AP_FIRMWARE_LOADER)\"
+endif
 ifdef WIFI_DRIVER_LOADER_DELAY
 LOCAL_CFLAGS += -DWIFI_DRIVER_LOADER_DELAY=$(WIFI_DRIVER_LOADER_DELAY)
 endif
@@ -40,7 +52,13 @@ ifdef WIFI_EXT_MODULE_NAME
 LOCAL_CFLAGS += -DWIFI_EXT_MODULE_NAME=\"$(WIFI_EXT_MODULE_NAME)\"
 endif
 
-LOCAL_SRC_FILES += wifi/wifi.c
+ifeq ($(TARGET_CUSTOM_WIFI),)
+	LOCAL_SRC_FILES += \
+		wifi/wifi.c
+else
+	LOCAL_SRC_FILES += \
+		$(TARGET_CUSTOM_WIFI)
+endif
 
 ifeq ($(BOARD_HAVE_SAMSUNG_WIFI),true)
     LOCAL_CFLAGS += -DSAMSUNG_WIFI
-- 
1.7.2.5

